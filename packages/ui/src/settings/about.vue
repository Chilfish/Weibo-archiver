<script setup lang="ts">
import { formatDate } from '@shared'

withDefaults(defineProps<{
  showDonate: boolean
}>(), {
  showDonate: true,
})

const {
  VITE_APP_VERSION: version,
  VITE_GIT_COMMIT_HASH: commitHash,
  VITE_GIT_COMMIT_URL: commitUrl,
  VITE_GIT_COMMIT_DATE: commitDate,
  // VITE_GIT_LAST_COMMIT_MESSAGE: commitMessage,
} = import.meta.env
</script>

<template>
  <main class="h-full center-col gap-4">
    <n-image
      :width="82"
      :height="82"
      class="w-24"
      preview-disabled
      alt="logo"
      src="/icon.webp"
    />

    <div class="mb-4 center flex-wrap gap-2">
      <a
        href="https://github.com/Chilfish/Weibo-archiver"
        target="_blank"
        title="GitHub Repo"
      >
        <img
          alt="GitHub Repo stars"
          src="https://img.shields.io/github/stars/chilfish/weibo-archiver"
        >
      </a>

      <a
        href="https://github.com/Chilfish/Weibo-archiver/releases"
        target="_blank"
        title="ä¸‹è½½é¡µé¢"
      >
        <img
          alt="GitHub Downloads"
          src="https://img.shields.io/github/downloads/chilfish/weibo-archiver/total"
        >
      </a>
    </div>

    <h2 class="text-7 font-bold">
      Weibo Archiver v{{ version }}

      <n-tooltip trigger="hover">
        <template #trigger>
          <a
            :href="commitUrl"
            target="_blank"
            class="text-5"
          >
            @{{ commitHash }}
          </a>
        </template>
        æœ€æ–°ä¸€æ¬¡æ„å»ºäº {{ formatDate(commitDate) }}
      </n-tooltip>
    </h2>

    <h3 class="text-5">
      å¾®åšå¤‡ä»½å·¥å…·ï¼Œä¸ºè´¦å·è¢«å®Œå…¨å¤¹æ²¡å‰æœªé›¨ç»¸ç¼ªğŸ˜­
    </h3>

    <p>
      ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼ŸæŸ¥çœ‹
      <a
        href="https://docs.qq.com/doc/DTWttbXlMUGxZZnZq"
        target="_blank"
        title="ä½¿ç”¨æ–‡æ¡£"
        class="font-bold underline"
      >
        ä½¿ç”¨æ–‡æ¡£
      </a>

      <span>
        ï¼Œæˆ–è€…åœ¨
        <RouterLink
          class="font-bold underline"
          to="/example"
        >
          è¿™é‡Œ
        </RouterLink>
        æŸ¥çœ‹ç¤ºä¾‹æ•°æ®
      </span>
    </p>
    <p
      v-if="showDonate"
      class="mt-2"
    >
      å¦‚æœè§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥è€ƒè™‘
      <a
        href="https://chilfish.top/sponsors"
        target="_blank"
        title="èµåŠ©åœ°å€"
        class="font-bold underline"
      >
        èµåŠ©æˆ‘
      </a>
      ğŸ˜‡ï¼Œè¿™å°†ç»™æˆ‘æ›´å¤šçš„åŠ¨åŠ›æ¥ç»´æŠ¤è¿™ä¸ªé¡¹ç›®
    </p>
  </main>
</template>
