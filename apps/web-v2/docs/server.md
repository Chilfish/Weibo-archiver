# 本地图片服务器

本地服务器是 Weibo Archiver 提供的一个实用程序，它主要有两个功能：

1.  **下载微博图片：** 根据油猴脚本导出的 `imgs.csv` 文件中记录的图片链接，将所有图片下载到你的电脑本地，防止原始链接失效后图片丢失。
2.  **启动本地浏览服务：** 在你的电脑上运行一个微型网站服务器，让你可以在浏览器中离线访问和浏览备份的微博数据及已下载的本地图片。

## 如何获取和使用？

1.  **下载程序：** 你需要先下载这个本地服务器程序。通常它会是一个可以直接运行的文件（例如 `weibo-archiver.exe` for Windows）。请从项目发布页或指定链接下载。
2.  **使用方法：** 这是一个命令行程序。你需要通过“终端”或“命令提示符”来运行它。
- **Windows 用户：** 可以在开始菜单搜索 "cmd" 或 "PowerShell" 打开命令提示符。
- **macOS/Linux 用户：** 可以使用 "Terminal" 程序。
- **简化操作：** 对于不熟悉命令行的用户，有时也可以尝试直接双击运行 `.exe` 文件，程序可能会提示你输入必要的参数。

### 参数说明

```bash
选项:
  -d, --dl                       下载模式
  -s, --server                   服务器模式
  -i, --imgs-path string         imgs.csv 的路径 (default "imgs.csv")
  -o, --download-folder string   图片保存的文件夹 (default "images")
  -c, --concurrency int          同时下载的最大数量 (default 4)
  -t, --delay int                每次下载的间隔时间（秒）
```

### 下载图片

假设你的 `weibo-archiver.exe` 文件和 `imgs.csv` 文件都在同一个文件夹（比如 "我的微博备份" 文件夹）。你希望把图片下载到这个文件夹下的一个新建的 `images` 子文件夹里。

打开命令提示符，并切换到 "我的微博备份" 文件夹路径下，然后输入：

```bash
./weibo-archiver.exe --dl -i imgs.csv -o images
```

在 Windows cmd 中，你可能需要写成 `weibo-archiver.exe --dl -i imgs.csv -o images`，即去掉前面的 `./`）

### 启动本地服务

**命令示例：**

假设你的图片已经通过上面的步骤下载到了 `images` 文件夹内。现在你想启动服务来浏览它们。

在命令提示符中，切换到 `weibo-archiver.exe` 所在的文件夹路径下，然后输入：

```bash
./weibo-archiver.exe --server -o images
```

**参数解释：**

- `--server` 或 `-s`: 表示你想要执行“服务器模式” (Server)。
- `-o images` 或 `--download-folder images`: 指定包含已下载图片的文件夹。这个路径是相对于你导入到网页端查看器的 `weibo-data.json` 中图片链接的基准路径。

**访问：** 启动成功后，命令提示符通常会显示服务正在运行。此时打开你的浏览器，在地址栏输入 `http://localhost:3000`)，然后像之前一样导入你的 `weibo-data.json` 文件。这次，图片就会从你的本地 `images` 文件夹加载了！

## 注意事项

1.  **图片命名规则：** 下载的图片会被程序按照特定的规则重命名，这样网页端查看器才能正确识别并显示它们。请不要随意修改下载后图片的文件名或存放结构。
2.  **离线浏览：** 一旦图片下载完成并通过本地服务加载，你就可以在没有网络连接的情况下浏览你的微博备份了。
3.  **技术求助：** 如果你对命令行操作确实感到困惑，可以尝试将这部分说明文字，连同你遇到的具体问题（例如错误提示信息），复制给 ChatGPT 这样的大语言模型，它们或许能提供一些有用的指导。
