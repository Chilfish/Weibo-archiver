<div align="center">
  <img
    alt="logo"
    width="100"
    src="https://p.chilfish.top/weibo/icon.webp"
  />

  <div>
    <img src="https://wakatime.com/badge/user/0842a71f-c026-4b09-8aa0-f8398b4c3423/project/3416f224-f0dc-4b08-805c-af30dbd396b2.svg" alt="wakatime">
    <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/chilfish/weibo-archiver">
    <img alt="GitHub Downloads" src="https://img.shields.io/github/downloads/chilfish/weibo-archiver/total">
  </div>
</div>

## Weibo-archiver

å°†ä½ çš„æ–°æµªå¾®åšå½’æ¡£ï¼Œä¸ºå·è¢«å®Œå…¨å¤¹æ²¡å‰ç»¸ç¼ª ğŸ˜­

![monkey](https://p.chilfish.top/weibo/cover.webp)

![å®«æ ¼å›¾ç‰‡](https://p.chilfish.top/weibo/gallery.png)

![å¡ç‰‡é¢„è§ˆ](https://p.chilfish.top/weibo/repost.png)

![è®¾ç½®é¡µ](https://p.chilfish.top/weibo/settings.webp)

![å¤œé—´æ¨¡å¼](https://p.chilfish.top/weibo/darkmode.png)

### ä½¿ç”¨æ–¹å¼

éœ€è¦æµè§ˆå™¨è£…æœ‰ [Tampermonkey](https://tampermonkey.net/) æˆ– [Violentmonkey](https://violentmonkey.github.io/) æ’ä»¶ã€‚

å®‰è£…è‡³æ²¹çŒ´è„šæœ¬ï¼š[weibo-archiver.user.js][releases]ï¼ˆå¦‚æœä¸‹è½½ç¼“æ…¢å¯ç”¨å¢ƒå†…åŠ é€Ÿçš„ [é•œåƒåœ°å€]ï¼‰ã€‚åœ¨ç”¨æˆ·ä¸ªäººä¸»é¡µï¼ˆå¿…é¡»æ˜¯é€šè¿‡ç‚¹å‡»å¤´åƒæ¥è¿›å…¥ï¼‰åˆ·æ–°åå°†è‡ªåŠ¨å¯åŠ¨è„šæœ¬ï¼Œç‚¹å‡»å¼€å§‹åå°†å¼€å§‹è·å–æ•°æ®ã€‚æœŸé—´è¯·ä¸è¦åˆ·æ–°æˆ–åˆ‡æ¢é¡µé¢ï¼Œå¦åˆ™å°±è¦é‡æ–°è·å–ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æŒ‰æ—¶é—´èŒƒå›´æ¥é€‰æ‹©ã€‚

> [!IMPORTANT]
> è¯¥é¡¹ç›®è¿˜åœ¨é”æ„å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ç¨³å®šçš„ bug ç­‰ï¼Œæ¬¢è¿å¤§å®¶æ issues æˆ–å‘èµ·è®¨è®ºğŸ˜‡æš‚æ—¶åªæ¥å—æ”¹ bug çš„ pr <br/>
> æœ‰å…³é¡¹ç›®çš„è¿›å±•è·¯çº¿ç­‰ï¼Œå¯è§ [é¡¹ç›®çš„ Todo] éƒ¨åˆ†

#### å¤„ç†å¯¼å‡ºåçš„æ•°æ®

å®Œæˆåå°†å¯¼å‡ºåŒ…å«å¾®åšæ•°æ®çš„ `weibo-data.json` å’ŒåŒ…å«å¾®åšå›¾ç‰‡é“¾æ¥çš„ `imgs.csv`ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚ä»¥åŠè‡ªåŠ¨ä¸‹è½½ `preview.zip`ï¼Œè§£å‹åé‡Œé¢åŒ…å«äº†ç”¨äºé¢„è§ˆçš„ HTML æ–‡ä»¶å’Œä¸€äº›å·¥å…·è„šæœ¬ã€‚

1. é¦–å…ˆå°† imgs.csv å¤åˆ¶åˆ° preview æ–‡ä»¶å¤¹ä¸­ï¼ˆç”¨äºä¸‹è½½å¾®åšå›¾ç‰‡ï¼‰

2. ç„¶åä½¿ç”¨ `download.mjs` æ¥ä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°ï¼ˆè¿™ä¸€æ­¥ä¹Ÿå¯ä»¥è·³è¿‡ï¼Œåœ¨é¢„è§ˆé¡µä¸­çš„è®¾ç½®ä¸­å¯ç”¨â€œä½¿ç”¨è¿œç¨‹ CDNâ€å³å¯ï¼Œä½†ä¸ºäº†æ°¸ä¹…ä¿å­˜å›¾ç‰‡ä¸è¢«çªç„¶è¢«å¤¹æ‰ï¼Œè¿˜æ˜¯å»ºè®®ä¸‹è½½å›¾ç‰‡ï¼‰

preview æ–‡ä»¶å¤¹ä¸­åŒ…å«äº†äº¤äº’å¼ä¸€é”®è¿è¡Œçš„ `run.bat` è„šæœ¬ï¼ˆæ„Ÿè°¢ [@HayashiKaori] [#20]ï¼‰ï¼ŒæŒ‰é‡Œé¢çš„æç¤ºè¿è¡Œå³å¯

> å…¶ä¸­ï¼Œè¿è¡Œä¸‹è½½å›¾ç‰‡è„šæœ¬ä¹‹å‰éœ€è¦å®‰è£… Node.jsï¼Œå¯ä»¥åœ¨ [Node.js å®˜ç½‘] ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶åæ‰¾æ•™ç¨‹é…ç½®ç³»ç»Ÿç¯å¢ƒ

#### æŸ¥çœ‹ç»“æœ

ç›®å‰æœ‰ä¸¤ç§æ–¹å¼é¢„è§ˆå¤‡ä»½åçš„å¾®åš

- ä½¿ç”¨æˆ‘ä»¬æä¾›çš„åœ¨çº¿é¢„è§ˆé¡µé¢ï¼šhttps://weibo.chilfish.top ï¼ˆæ¨èï¼‰ã€‚ç‚¹å‡»å³ä¸Šè§’çš„è®¾ç½®æŒ‰é’®ï¼ŒæŒ‰æç¤ºå¯¼å…¥åˆšæ‰å¯¼å‡ºçš„ `weibo-data.json` å³å¯æŸ¥çœ‹ï¼ˆä¹Ÿæ”¯æŒæ—§ç‰ˆå¯¼å‡ºçš„ data.mjsï¼‰
- ä½¿ç”¨æœ¬åœ°é¢„è§ˆã€‚ä¸æ”¯æŒç›´æ¥ç‚¹å‡» index.html æ¥æŸ¥çœ‹ï¼Œéœ€è¦å¯åŠ¨æœ¬åœ°çš„æœåŠ¡å™¨ã€‚è¿è¡Œ `run.bat` è„šæœ¬æŸ¥çœ‹

ä¸è¿‡æ­£åœ¨å¼€å‘æ¡Œé¢ç‰ˆappï¼Œå±Šæ—¶å°†ä¸å†éœ€è¦è¿™äº›å¤æ‚çš„æ“ä½œï¼Œç›´æ¥åŒå‡»æ‰“å¼€å³å¯æŸ¥çœ‹

### æ³¨æ„äº‹é¡¹ | å£°æ˜

è¯¥å·¥å…·ä»…èƒ½è·å–å…¬å¼€å¯è§çš„å¾®åšï¼Œå¯¹äºé‚£äº›ä»…åŠå¹´å¯è§ä¹‹å¤–çš„ã€ä»…ç²‰ä¸ï¼ˆè‡ªå·±ï¼‰å¯è§çš„ç­‰ï¼Œè‹¥ä¸æ˜¯è‡ªå·±çš„å¾®åšï¼Œå°†æ— æ³•è·å–ã€‚

- **å®Œå…¨å…è´¹**ï¼Œä½¿ç”¨ MIT åè®®å¼€æºï¼Œä¸ä¼šæœ‰ä»»ä½•æ”¶è´¹è¡Œä¸ºã€‚ä½†å¦‚æœè¦äºŒæ¬¡åˆ›ä½œæˆ–è€…å¼•ç”¨ï¼Œéœ€è¦æ³¨æ˜å‡ºå¤„å’Œç½²åğŸ˜‡

- è‹¥å¾®åšè´¦å·è¢«å°ï¼Œä½†è®¿é—®è‡ªå·±çš„ä¸»é¡µå¾®åšï¼Œä¹Ÿèƒ½è·å–å¤‡ä»½ã€‚ä¹Ÿå°±æ˜¯ **åªè¦èƒ½èƒ½çœ‹å¾—è§ï¼Œå°±èƒ½å­˜æ¡£**

- å…³äºåœ¨çº¿é¢„è§ˆé¡µé¢ã€‚ä¸Šä¼ çš„å¾®åšæ•°æ®å®Œå…¨ä¿å­˜åœ¨ä½ çš„æµè§ˆå™¨æœ¬åœ°ï¼Œä½ å’Œåˆ«äººéƒ½ **æ— æ³•é€šè¿‡é“¾æ¥æ¥ç›´æ¥æŸ¥çœ‹è¿™äº›å¾®åšæ•°æ®**ã€‚ä½†å¦‚æœä½ æƒ³åˆ†äº«ç»™å…¶ä»–äººæŸ¥çœ‹ï¼Œå¯ä»¥å°† `weibo-data.json` å‘é€ç»™ä»–ä»¬ï¼Œå¹¶æŒ‰æç¤ºå¯¼å…¥å³å¯ï¼ŒåŒæ—¶å†è®¾ç½®é‡Œå°†å›¾ç‰‡é“¾æ¥è®¾ä¸ºè¿œç¨‹ CDN é“¾æ¥ï¼Œæˆ–æ˜¯å¡«ä¸Šä½ çš„å›¾åºŠåœ°å€

- è¯„è®ºåŒºï¼šè·å–æ—¶ï¼Œå°†é»˜è®¤åŒæ—¶è·å–å‰ 10 æ¡çƒ­è¯„ï¼Œæ€»æ•°ä¸è¶…è¿‡ 15 æ¡ã€‚è¿™æ˜¯ä¸ºäº†é¿å…é¢‘ç¹è°ƒç”¨æ¥å£ï¼Œè€Œå¯èƒ½ä¼šå¯¼è‡´çš„ä¸æ˜é—®é¢˜ã€‚æš‚æ—¶ä¹Ÿä¸æ”¯æŒæ¥¼ä¸­æ¥¼

- åª’ä½“æ–‡ä»¶ï¼šåªèƒ½è·å–å›¾ç‰‡ï¼Œå°†ä»¥å›¾ç‰‡é“¾æ¥æ–‡ä»¶çš„å½¢å¼å¯¼å‡ºï¼Œéœ€è¦åŒæ—¶ä½¿ç”¨å‹ç¼©åŒ…é‡Œçš„ `download.mjs` è„šæœ¬ä¸‹è½½å¥½ä¹‹åï¼Œæ‰èƒ½åœ¨é¢„è§ˆé¡µé¢ä¸­å¯è§ã€‚è¿™æ˜¯ä¸ºäº†èƒ½å¤Ÿç¦»çº¿é¢„è§ˆï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æŸå¤©å›¾ç‰‡çªç„¶è¢«å¤¹æ²¡äº†ğŸ˜…ã€‚å¹¶ä¸”ç”±äºè§†é¢‘æ–‡ä»¶å¯èƒ½ä¼šè¿‡å¤§ã€è¿‡é•¿ï¼Œå°†é‡‡ç”¨å¤–é“¾çš„å½¢å¼æ¥å‘ˆç°ã€‚

- ä¸è¿‡å¯ä»¥å°†ä¸‹è½½åçš„å›¾ç‰‡ä¸Šä¼ åˆ°ä½ è‡ªå·±çš„å›¾åºŠæœåŠ¡å™¨é‡Œï¼Œæ³¨æ„ä¸è¦æ”¹å˜æ–‡ä»¶ç›®å½•ï¼Œå†åœ¨é¢„è§ˆé¡µé¢çš„è®¾ç½®ä¸­å¡«å†™ä½ çš„å›¾åºŠé“¾æ¥å³å¯

### å¯¹å¼€å‘è€…

é¡¹ç›®é‡‡ç”¨ monorepo çš„ç»“æ„ï¼Œä½¿ç”¨ pnpm ç®¡ç†ã€‚Web é¡µé¢æ‰˜ç®¡åœ¨ [vercel] ä¸Š

åœ¨ packages ç›®å½•ä¸‹ï¼š

- [/core](packages/core/) åŒ…å«äº†å·¥å…·å‡½æ•°ã€pinia ç­‰æ•°æ®å¤„ç†çš„æ ¸å¿ƒ
- [/ui](packages/ui/) åŒ…å« UI éƒ¨åˆ†çš„ç»„ä»¶ä»£ç 
- [/database](packages/database/) Sqlite3 Drizzle-ORM

åœ¨ apps ç›®å½•ä¸‹ï¼Œä¸ºæœ€ç»ˆçš„åº”ç”¨

- [/web](apps/web/) æ˜¯ç”¨äºæœ€ç»ˆæŸ¥çœ‹å¾®åšæ•°æ®çš„ç½‘é¡µ
- [/monkey](apps/monkey/) ç”¨äºæ‰“åŒ…æˆæ²¹çŒ´è„šæœ¬
- [/desktop](apps/desktop/) æ¡Œé¢ç«¯ç‰ˆæœ¬

åªéœ€è¦åœ¨æ ¹ç›®å½•ä¸­ `pnpm i` å³ä¸ºæ‰€æœ‰å­é¡¹ç›®å®‰è½¬ä¾èµ–ï¼Œ`pnpm dev:monkey` å¯¹åº”çš„æ˜¯åœ¨ /monkey ä¸­çš„ `pnpm dev`

> æ³¨æ„éƒ¨ç½²æ„å»ºæ—¶ï¼Œéœ€è¦æš‚æ—¶æ³¨é‡Šæ‰è¿™å‡ è¡Œä»£ç ğŸ˜…ï¼‰ä¼šä¿®çš„ https://github.com/Chilfish/Weibo-archiver/blob/b69465e9a317710bdd9bd299a0aa105a9efec976/packages/core/src/utils/index.ts#L35-L39

ç›®å‰æˆ‘è¿˜åœ¨å­¦ä¹ ç€ electron å¼€å‘ï¼Œæ¡Œé¢ç«¯éƒ¨åˆ†è¿˜å¾—å†ç­‰ç­‰ğŸ¥ºåŸå‹ä»€ä¹ˆçš„è¿˜åœ¨è®¾è®¡

æœ‰å…³é¡¹ç›®çš„è¿›å±•è·¯çº¿ç­‰ï¼Œå¯è§ [é¡¹ç›®çš„ Todo] éƒ¨åˆ†

### é¸£è°¢

- æ„Ÿè°¢ [speechless] æä¾›çš„åŸºæœ¬æ€è·¯
- [vite-plugin-monkey] æä¾›äº†æ‰“åŒ…æˆæ²¹çŒ´è„šæœ¬çš„å·¥å…·
- [naive-ui] æä¾›çš„æ¼‚äº® UI ç»„ä»¶åº“
- [vercel] æä¾›çš„å¼ºå¤§äº‘å¹³å°ğŸ˜š
- Github Copilot ğŸ˜‡

### èµåŠ©

å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥è€ƒè™‘èµåŠ©væˆ‘ğŸ˜‡è¿™å°†ç»™æˆ‘æ›´å¤šçš„åŠ¨åŠ›æ¥ç»´æŠ¤è¿™ä¸ªé¡¹ç›®ï¼š[èµåŠ©åœ°å€]

[releases]: https://raw.githubusercontent.com/Chilfish/Weibo-archiver/monkey/weibo-archiver.user.js
[speechless]: https://github.com/meterscao/Speechless
[naive-ui]: https://www.naiveui.com/zh-CN/os-theme
[#1]: https://github.com/Chilfish/Weibo-archiver/issues/1
[#5]: https://github.com/Chilfish/Weibo-archiver/issues/5
[#20]: https://github.com/Chilfish/Weibo-archiver/discussions/20
[@HayashiKaori]: https://github.com/HayashiKaori
[Node.js å®˜ç½‘]: https://nodejs.org/en/download
[vite-plugin-monkey]: https://github.com/lisonge/vite-plugin-monkey
[é•œåƒåœ°å€]: https://p.chilfish.top/weibo-archiver.user.js
[é¡¹ç›®çš„ Todo]: https://github.com/Chilfish/Weibo-archiver/issues/7
[èµåŠ©åœ°å€]: https://chilfish.top/sponsors
[vercel]: https://vercel.com
